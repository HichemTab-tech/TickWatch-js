/*
 * TickWatch-js v1.0.2
 * (c) HichemTech
 * Released under the MIT License.
 * Github: github.com/HichemTab-tech/TickWatch-js
 */

(function(C,v){typeof exports=="object"&&typeof module<"u"?v(exports):typeof define=="function"&&define.amd?define(["exports"],v):v((C=typeof globalThis<"u"?globalThis:C||self)["TickWatch-js"]={})})(this,function(C){"use strict";const v=(i,n=!0)=>i!=null&&(typeof i!="string"||!n||i!==""),b=function(i={},...n){let r=[];const o={start:function(t,e){return e.isCounting=!0,e.timer=setTimeout(()=>{x(u(e))},1e3),f(e),u(e).trigger("TickWatch.start",[e]),t},stop:function(t,e){return e.isCounting=!1,f(e),u(e).trigger("TickWatch.stop",[e]),t},set:function(t,e,s){let g=s[0];return g=v(g)?g.trim():"",g.split(":").length===e.partsLength.length&&(e.current=g,f(e),y(u(e))),t},clear:function(t,e){return e.current=e.settings.startTime,f(e),y(u(e)),u(e).trigger("TickWatch.clear",[e]),t},option:function(t,e,s){return e.settings===void 0&&(e.settings={}),!v(s)||s.length<1||s.length>2?console.error("Arguments number not valid"):s.length===1?t.push(e.settings[s[0]]):s.length===2&&(e.settings[s[0]]=s[1],f(e)),t},destroy:function(t,e){const s=u(e);return s.trigger("TickWatch.destroy",[e]),s.empty(),s.data("TickWatch",null),s.removeAttr("data-TickWatch-id"),t}};return $(this).each(function(){let t=$(this).data("TickWatch"),e=Math.floor(1e3*Math.random()+100);if(t)typeof i=="string"&&o[i]!==void 0&&(r=o[i](r,t,[...n]));else{let s=$.extend({partsKeys:["seconds","minutes",{hours:24}],direction:"up",startTime:null,endTime:null,activeCellClass:"active-cell",inactiveCellClass:"inactive-cell"},i),g=$(this),W={};for(let m=0;m<s.partsKeys.length;m++){let d=s.partsKeys[m];if(typeof d=="string")W[d]=60;else{let l=Object.keys(d)[0];W[l]=d[l]}}t={idSuffix:e,settings:s,parts:W,partsLength:s.partsKeys.length,isCounting:!1,timer:null,current:null};let[M,w]=[z(t.settings.partsKeys.length),O(W)];t.settings.startTime===null&&(t.settings.startTime=t.settings.direction==="up"?M:w),t.settings.endTime===null&&(t.settings.endTime=t.settings.direction!=="up"?M:w),t.current=s.startTime,$(this).data("TickWatch",t),$(this).attr("data-TickWatch-id",e),$(((m="defaultId",d=["seconds","minutes","hours"])=>{const l=38+42*(d.length-1);return`
                <svg class='TickWatch-clock' id='${m}' viewBox='0 36 ${l} 36' xmlns='http://www.w3.org/2000/svg'>
                    ${((h,p)=>{let T=[];const _=(a,c,k=!1)=>` <g>
                                        <path id='${h}_${a}_${k?"a":"b"}_7' class="clock-cell" d='M${l-16-c},69l3-3h6l3,3c0,0-1,1-3,1h-6C${l-15-c},70,${l-16-c},69,${l-16-c},69z'/>
                                        <path id='${h}_${a}_${k?"a":"b"}_6' class="clock-cell" d='M${l-3-c},55l-3,2v8l3,3c0,0,1-1,1-3v-7C${l-2-c},56,${l-3-c},55,${l-3-c},55z'/>
                                        <path id='${h}_${a}_${k?"a":"b"}_5' class="clock-cell" d='M${l-17-c},55l3,2v8l-3,3c0,0-1-1-1-3v-7C${l-18-c},56,${l-17-c},55,${l-17-c},55z'/>
                                        <polygon id='${h}_${a}_${k?"a":"b"}_4' class="clock-cell" points='${l-13-c},52 ${l-7-c},52 ${l-4-c},54 ${l-7-c},56 ${l-13-c},56 ${l-16-c},54'/>
                                        <path id='${h}_${a}_${k?"a":"b"}_3' class="clock-cell" d='M${l-3-c},40l-3,3v8l3,2c0,0,1-1,1-3v-7C${l-2-c},41,${l-3-c},40,${l-3-c},40z'/>
                                        <path id='${h}_${a}_${k?"a":"b"}_2' class="clock-cell" d='M${l-17-c},40l3,3v8l-3,2c0,0-1-1-1-3v-7C${l-18-c},41,${l-17-c},40,${l-17-c},40z'/>
                                        <path id='${h}_${a}_${k?"a":"b"}_1' class="clock-cell" d='M${l-16-c},39l3,3h6l3-3c0,0-1-1-3-1h-6C${l-15-c},38,${l-16-c},39,${l-16-c},39z'/>
                                    </g>
                                   `;for(let a=0;a<p.length;a++)T.push(`  <g id=${h}_${p[a]}>
                            ${_(p[a],42*a,!0)}
                            ${_(p[a],42*a+18)}
                        </g>
                    `);return T.reverse(),T.join("")})(m,d)}
                    ${(h=>{const p=[];for(let T=0;T<h;T++){const _=42*T+40;p.push(`<circle cx='${_}' cy='50' r='2'/><circle cx='${_}' cy='58' r='2'/>`)}return p.reverse(),`<g id='dots'>${p.join("")}</g>`})(d.length-1)}
                </svg>
            `})("TickWatch_"+e,Object.keys(t.parts))).appendTo(g),y($(this))}}),r.length>1?r:r.length===0?null:r[0]},z=i=>new Array(i).fill("00").join(":"),O=i=>Object.values(i).map(n=>j(n-1)).join(":"),K=(i,n,r,o)=>{r=[[1,1,1,0,1,1,1],[0,0,1,0,0,1,0],[1,0,1,1,1,0,1],[1,0,1,1,0,1,1],[0,1,1,1,0,1,0],[1,1,0,1,0,1,1],[1,1,0,1,1,1,1],[1,0,1,0,0,1,0],[1,1,1,1,1,1,1],[1,1,1,1,0,1,1]][r];let t=0;for(;t<r.length;){const e=$(`#${i}_${n}_${t+1}`);r[t]===0?(e.removeClass(o.settings.activeCellClass),e.addClass(o.settings.inactiveCellClass)):(e.removeClass(o.settings.inactiveCellClass),e.addClass(o.settings.activeCellClass)),t++}},j=i=>(i+="").length===1?"0"+i:i,x=i=>{let n=i.data("TickWatch");if(n&&n.isCounting){if(n.current===n.settings.endTime)return n.isCounting=!1,f(n),void u(n).trigger("TickWatch.end",[n]);n=S(n),f(n),y(i),setTimeout(function(){x(i)},1e3)}else u(n).trigger("TickWatch.end",[n])},y=i=>{let n=i.data("TickWatch");u(n).trigger("TickWatch.update",[n]);let r=n.current.split(":");r.reverse();let o=Object.keys(n.parts);for(let t=o.length-1;t>=0;t--){let e=o[t],s=r[t].split("");for(let g=0;g<s.length;g++)K(`TickWatch_${n.idSuffix}_${e}`,g===1?"a":"b",parseInt(s[g]),n)}},S=i=>{let n=i.current.split(":");n.reverse();let r=Object.values(i.parts);if(n=n.map(t=>parseInt(t)),i.settings.direction==="up")for(let t=0;t<n.length;t++){if(n[t]<r[t]-1){n[t]++;break}n[t]=0}else for(let t=0;t<n.length;t++){if(n[t]>0){n[t]--;break}n[t]=r[t]-1}let o=n.map(t=>j(t));return o.reverse(),i.current=o.join(":"),i},f=i=>{u(i).data("TickWatch",i)},u=i=>$('[data-TickWatch-id="'+i.idSuffix+'"]');jQuery.fn.TickWatch=b,C.TickWatch=b,Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})});
